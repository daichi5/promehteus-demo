FROM node:21-alpine3.19 

WORKDIR /app

RUN corepack enable

COPY package.json package-lock.json pnpm-lock.yaml ./
RUN pnpm install --prod --frozen-lockfile

COPY . .

RUN pnpm run build

USER node
